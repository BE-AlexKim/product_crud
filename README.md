# Carpenstreet

## 카펜스트리트 입사 과제

### 1. 사고의 흐름
```
1차적으로 작가와 고객 관리자의 권한 처리를 위해서 진행해야 된다고 생각했기 때문에 Spring Security 구성과 JWT 
구성을 통해 구성하였습니다. 또한 프로레스를 진행했을 때, 어드민과 작가의 필수값이 각각 다르다는 점이 눈에 들어왔습니다. 
작가는 이름과 휴대폰을 필수로 입력 해야하는 부분은 아래의 문자 발송 API가 있다는 점을 확인하였고, 
해당 API는 관리자가 작가의 작품을 검토하는 과정에서 검토의 성공/실패의 결과를 작가에게 전달하는 용도로 사용될 것이라고 
인지했습니다. 또한, 검토의 과정에서 어떠한 관리자가 검토를 했는지를 알 수 있게 관리자의 이름을 필수로 등록해야 하지 않는것일까하고 
가정할 수 있었습니다.
```
### 2. 가정사항
```

```
### 3. 고려 사항
```
1. 상품 등록
(1) 상품 등록의 경우 작가 권한의 사용자만 등록할 수 있으며, 상품을 등록할때, 임시 저장이 가능하다.
(2) 상품 등록 진행 시, 오류가 발생하면 적절한 응답과 함께 로그를 남긴다.
(3) 상품 등록 시, 임시저장의 경우, 미입력 데이터가 있더라도 저장이 되어야 한다.
(4) 작가는 상품을 한국어로 작성한다.

2. 상품 수정
(1) 작가 권한의 경우, 임시 저장 상태의 경우 수정이 자유롭다. 
(2) 상품 수정 진행 시, 오류가 발생하면 적절한 응답과 함께 로그를 남긴다.
(4) 매니저 권한의 사용자는 검토가 거절된 상태의 상품은 수정할 수 있다.
(5) 상품의 상태가 검토 거절인 경우, 본문과 제목이 수정될 때 번역 API를 이용해야 한다.
(6) 작가는 검토 완료 된 상품의 내용을 수정해서 검토 요청으로 매니저에게 요청할 수 있다.

3. 상품 검토 요청
(1) 상품의 검토 요청은 작가 권한의 사용자만 가능하다.
(2) 상품 검토 요청 시, 데이터가 모두 입력되어있는지 상태값을 체크한다.
(3) 작가는 검토 거절된 상품의 내용을 수정해서 검토 요청을 진행할 수 있다.

4. 상품 검토 중 상태 변경 요청
(1) 매니저는 검토 요청된 상품의 상태를 검토중으로 변경할 수 있다.
(2) 매니저가 검토 중으로 상태를 변경 시, 작가에게 문자메시지를 발송한다.
(3) 검토 중으로 변경 시, 제목 및 본문 등 사용자에게 노출되는 메시지를 번역하여 영어/일본어판도 소유할 수 있다.
(4) 언어 번역 시, 일정확률로 API가 실패할 수 있다.

5. 상품 거절 상태값 변경 요청
(1) 매니저 권한의 사용자만 해당 엔드포인트를 사용할 수 있다.
(2) 상품이 거절될 경우, 작가에게 문자메세지를 보낸다.
(3) 매니저는 거절 사유를 선택적으로 작성할 수 있다.
(4) 검토가 거절된 사유가 존재한다면, 문자 메세지로 함께 전송한다.
(5) 검토 거절 시, 검토 중에서 생성된 번역문을 삭제한다. 

6. 검토 완료 상태값 변경
(1) 검토 완료 시, 작가에게 검토가 완료되었다는 문자 메세지를 보내게 됩니다.

7. 상품 조회
(1) 작가는 임시저장된 상품, 검토 요청 중인 상품, 검토 중인 상품을 조회할 수 있다.
(2) 매니저는 임시저장된 상태의 상품을 제외한 모든 상태의 상품을 조회할 수 있다.
(3) 매니저는 조회 시, 이름,상태,제목으로 필터링, 정렬, 페이지네이션이 가능해야 한다.
(4) 상품 조회 시, 언어값으로 해당 상품을 조회할 수 있다.
(5) 고객은 검토가 완료된 상품만 조회할 수 있다.

8. 상품 상세 조회
(1) 매니저는 검토 요청 및 검토 거절의 상태의 상세 정보를 확인할 수 있다.
(2) 고객은 검토 완료된 상품의 단일 상품의 상세정보를 조회할 수 있습니다.
```
### 4. 특이 사항
```

```
### 5. 코드 구조 선택과 근거
```
첫 번째로 구현은 확장성이 가능한 구조로 작성하는 것이 좋을 것이라고 판단하였습니다.
카펜스트리트에서 SOLID 원칙을 따르고 있기에 최대한 확장 가능하게 작성하는 것이 
회사의 핏과 가장 적절한 코드를 구현할 수 있다고 생각했기 때문입니다.

Service단과 구현체를 별도로 두고 구현했고, SRP 원칙을 가장 우선으로 코드를 구현했습니다.

```
### 6. ERD/UML Practice
```

```
### 7. 시행착오 및 피드백 (힘들었던 점, 개선하면 좋겠다고 생각하는 점)
```
SOLID 원칙을 고려하고 작성하다보니, 확장성에 대해서 많은 고민을 하였습니다. 단순하게 상품을 등록하는 부분에서도 
단일책임원칙을 준수하여 작성하다보니, 

1. 임시저장하는 항목에서 사용자가 새로 작성하여 상품을 등로하다가 임시 저장하는 경우,
2. 임시저장되어 있던 항목을 다시 임시저장하는 경우

이렇게 두 가지 항목만을 고려하더라도 수정과 등록이 모두 일어나는 상황이기에 하나의 엔드포인트에서 해당 로직을 진행하기에 
등록과 수정이 함께 일어나는 서비스 단의 구현체는 어떻게 개발을 하는 것이 적절한 것인지에 대해서 고민을 하였던 것 같습니다.

```